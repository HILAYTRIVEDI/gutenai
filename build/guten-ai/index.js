(()=>{"use strict";var e,t={231:(e,t,n)=>{const r=window.wp.blocks,s=window.wp.i18n,a=window.wp.blockEditor,o=window.wp.element,i=window.wp.components,l=window.wp.apiFetch;var c=n.n(l);const d=window.wp.data,u=window.ReactJSXRuntime,w=JSON.parse('{"UU":"create-block/guten-ai"}');(0,r.registerBlockType)(w.UU,{edit:function({attributes:e,setAttributes:t}){const{keywords:n=[],generatedKeywords:r=[]}=e,[l,w]=(0,o.useState)(!1),[g,p]=(0,o.useState)(null),[h,y]=(0,o.useState)(!1),k=(0,d.useSelect)((e=>e("core/editor")?.getEditedPostContent()),[]),v=(0,o.useMemo)((()=>k?k.replace(/&#?[a-z0-9]{2,8};/gi,"").replace(/\b[A-Z][A-Z]+\b/g,"").replace(/<br\s*\/?>(?!\n)/gi,"\n\n").replace(/<\/?.+?>/g,"").trim():""),[k]),b=(0,o.useCallback)((async()=>{if(!(!v||l||r.length>0)){w(!0),p(null);try{const e=await c()({path:`guten-ai/v1/keywords?text=${encodeURIComponent(v)}&cache=${h}`,method:"GET"});if(e.success&&Array.isArray(e.keywords)){const n=[...new Set(e.keywords.map((e=>e.keyword)))];t({generatedKeywords:n}),0===n.length&&p((0,s.__)("No keywords found.","guten-ai"))}else p((0,s.__)("Please check if the API Key is set or not.","guten-ai"))}catch(e){p((0,s.__)("Error fetching keywords. Please try again.","guten-ai"))}finally{w(!1)}}}),[v,l]),f=(0,o.useCallback)((e=>{if(!n.includes(e)){const r=[...n,e];t({keywords:r})}}),[n,t]),m=(0,o.useCallback)((e=>{const n=[...new Set(e.split(",").map((e=>e.trim())).filter(Boolean))];t({keywords:n})}),[t]);return(0,u.jsxs)("div",{...(0,a.useBlockProps)(),className:"gutenai-keywords-block",children:[g&&(0,u.jsx)(i.Notice,{status:"error",isDismissible:!0,onRemove:()=>p(null),children:g}),(0,u.jsxs)("div",{className:"gutenai-keywords-fetch",children:[(0,u.jsx)("p",{className:"gutenai-keywords-fetch-title",children:(0,u.jsx)("strong",{children:(0,s.__)("GutenAI Content Suggestions:","guten-ai")})}),(0,u.jsxs)(i.Button,{variant:"primary",onClick:b,disabled:l||!v,className:"gutenai-keywords-fetch-button",children:[(0,s.__)("Generate Keywords from Content","guten-ai"),l&&(0,u.jsx)(i.Spinner,{})]})]}),r.slice(0,20).length>0&&(0,u.jsx)("div",{className:"gutenai-keywords-list",children:r.slice(0,20).map((e=>(0,u.jsx)(i.Button,{variant:"secondary",onClick:()=>f(e),disabled:n.includes(e),children:e},e)))}),(0,u.jsxs)("div",{className:"gutenai-keywords-editor",children:[(0,u.jsx)("label",{htmlFor:"gutenai-keywords",children:(0,s.__)("Selected Keywords:","guten-ai")}),(0,u.jsx)(a.RichText,{id:"gutenai-keywords",tagName:"p",className:"gutenai-keywords-input",placeholder:(0,s.__)("Enter or edit keywords...","guten-ai"),value:n.join(", "),onChange:m,allowedFormats:[]})]})]})},save:function({attributes:e}){const{keywords:t}=e;if(!t?.length)return null;const n=t.map((e=>`#${e.replace(/\s+/g,"")}`)).join(" ");return(0,u.jsx)("div",{...a.useBlockProps.save(),children:(0,u.jsx)("p",{"aria-label":"Selected keywords",children:n})})}})}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,s,a)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,s,a]=e[d],i=!0,l=0;l<n.length;l++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(i=!1,a<o&&(o=a));if(i){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,s,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,46:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var s,a,[o,i,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(l)var d=l(r)}for(t&&t(n);c<o.length;c++)a=o[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},n=globalThis.webpackChunkguten_ai=globalThis.webpackChunkguten_ai||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=r.O(void 0,[46],(()=>r(231)));s=r.O(s)})();